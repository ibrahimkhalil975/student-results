<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>جامعة الهادي - نتائج الطلاب</title>
  <style>
    body {font-family:"Cairo","Tahoma",sans-serif;background:#f0f2f5;direction:rtl;margin:0;padding:0;}
    .header {background:#002147;color:#fff;padding:20px;text-align:center;font-size:26px;font-weight:bold;}
    .sub-header {background:#004080;color:#fff;padding:12px;text-align:center;font-size:18px;}
    .input-section {text-align:center;margin:30px 0;}
    input {padding:10px;width:250px;font-size:16px;border:1px solid #ccc;border-radius:5px;}
    button {padding:10px 20px;font-size:16px;background:#004080;color:#fff;border:none;border-radius:5px;cursor:pointer;margin-right:10px;}
    .card {background:#fff;margin:0 auto 30px;padding:25px;border-radius:12px;box-shadow:0 0 15px rgba(0,0,0,0.1);width:90%;max-width:700px;text-align:right;}
    .student-info {font-size:18px;margin-bottom:20px;border-bottom:2px solid #eee;padding-bottom:10px;}
    table {width:100%;border-collapse:collapse;margin-bottom:20px;}
    th,td {border:1px solid #ccc;padding:10px;text-align:center;}
    th {background:#004080;color:#fff;}
    .note {color:red;font-size:18px;text-align:center;font-weight:bold;margin-bottom:20px;}
    .signature {font-size:16px;color:#555;text-align:left;padding-left:20px;}
  </style>
</head>
<body>
  <div class="header">جامعة الهادي</div>
  <div class="sub-header">الكلية التقنية الهندسية - قسم الأجهزة الطبية</div>

  <div class="input-section">
    <input type="text" id="examInput" placeholder="أدخل رقمك الامتحاني">
    <button onclick="loadResult()">عرض النتيجة</button>
  </div>

  <div class="card" id="resultCard" style="display:none;">
    <div class="student-info">
      <p>الاسم: <span id="studentName">---</span></p>
      <p>الرقم الامتحاني: <span id="examId">---</span></p>
    </div>

    <table>
      <thead>
        <tr><th>المادة</th><th>الدرجة</th></tr>
      </thead>
      <tbody id="subjectsTable"></tbody>
    </table>

    <div class="note">ملاحظة: <span id="noteText">---</span></div>
    <div class="signature">المهندس إبراهيم خليل</div>
  </div>

  <script>
    function loadResult() {
      var examId = document.getElementById("examInput").value.trim();
      if (!examId) return alert("يرجى إدخال الرقم الامتحاني");

      fetch("https://script.google.com/macros/s/AKfycbzyjfOyCm559AWqaW8k2IYF3zxSOKCh1cCssQ7oi4y-jKVON_g6CogQNFuBKRjLOVqZJg/exec?id=" + examId)
        .then(res => res.json())
        .then(data => {
          document.getElementById("studentName").innerText = data.name;
          document.getElementById("examId").innerText = data.examId;

          var table = document.getElementById("subjectsTable");
          table.innerHTML = "";
          data.subjects.forEach(sub => {
            var row = document.createElement("tr");
            row.innerHTML = `<td>${sub.name}</td><td>${sub.grade}</td>`;
            table.appendChild(row);
          });

          document.getElementById("noteText").innerText = data.note || "لا توجد ملاحظة";
          document.getElementById("resultCard").style.display = "block";
        })
        .catch(err => {
          alert("الرقم غير موجود أو حدث خطأ");
          console.error(err);
        });
    }
  </script>
</body>
</html>
